export interface GuideSection {
  id: string;
  title: string;
  content: string;
}

export const GUIDE_CONTENT: GuideSection[] = [
  {
    id: 'quick-start',
    title: '快速开始',
    content: `
# 快速开始指南

欢迎来到东方异界食堂！请跟随以下步骤开始您的幻想乡之旅。

### 第一步：创建专属存档
为了获得最佳的游戏体验，建议您不要直接使用默认存档。
1. 点击顶部的 **[💾 存档管理](action:openSaveManager)** 按钮。
2. 在弹出的窗口中点击 **“新建存档”**。
3. 按照引导填写您的角色昵称、设定初始属性等。
4. 创建完成后，系统会自动切换到您的新存档。

### 第二步：配置大语言模型 (LLM)
本游戏采用 **“四重模型协作架构”**，不同的任务由四个独立的 AI 模型分工完成。**您必须为这四个模型都配置好可用的模型名称（及 API Key），游戏才能正常运行。**

1. 点击顶部的 **[⚙️ 设置](action:openSettings)** 按钮。
2. 在 **“LLM配置”** 选项卡中，您会看到以下四个需要配置的模型：

- **🎭 对话模型 (LLM #1)**: 
    - **职责**：负责扮演 NPC 与您对话，描写剧情细节。
    - **建议**：使用具有强大角色扮演能力和长上下文的模型（如 Gemini 2.5 Pro, Claude 4.5 Sonnet）。
    - **字数控制**：您可以在此模型选项卡中设置 **“回复字数控制”**（如 800-1200 字）。AI 会尽量在此范围内进行回复，避免出现过短或过于冗长的回复。
- **⚖️ 逻辑模型 (LLM #2)**: 
    - **职责**：分析对话内容，自动更新您的金钱、好感度、物品等变量，以及生成快捷回复。
    - **建议**：使用遵循指令能力强、速度快的模型（如 Gemini 2.5 Flash）。
- **🧠 记忆模型 (LLM #3)**: 
    - **职责**：将对话总结为长期记忆，确保 AI 不会“聊了就忘”。
    - **建议**：同逻辑模型，侧重于总结能力。
- **🛠️ 杂项模型 (LLM #4)**: 
    - **职责**：处理战斗中的“嘴遁”逻辑判定、随机地图生成等特殊任务。
    - **建议**：基础模型即可。

3. **配置方式**：
    - 您可以在“全局配置”中填入统一的 API Key 和 Base URL。
    - 然后在各个模型子选项卡中，点击“继承全局”或单独配置。
    - **重要**：请确保每个模型子选项卡里的 **“模型名称”** 都不是空的。
4. 点击 **“保存配置”**。

### 第三步：开始对话
一切准备就绪！
1. 在底部的输入框中输入您想说的话，或者点击上方的 **“快捷回复”** 气泡。
2. 点击发送按钮（或按 Enter 键）。
3. 等待 AI 回复，享受剧情吧！

> **小贴士**：如果 AI 的回复不符合您的预期，您可以点击输入框旁边的 **[🔄 刷新](action:highlightRefresh)** 按钮重新生成。
`
  },
  {
    id: 'player-config',
    title: '玩家配置',
    content: `
# 玩家配置指南

通过“玩家配置”功能，您可以深度定制您的角色形象、性格以及掌握故事的整体进度。

### 如何进入？
1. 点击左侧状态卡片中您的 **[头像]** 即可打开配置窗口。
2. 或者直接点击这里：**[🎭 玩家配置](action:openPlayerConfig)**。

### 核心功能

1. **🎭 角色形象与设定**
    - **自定义头像**：您可以上传本地图片，并使用内置的裁剪工具调整位置与缩放，打造完美的视觉形象。
    - **详细人设 (Persona)**：这是 AI 对您认知的核心。在这里输入的文字将直接注入提示词，影响 AI 如何称呼您、如何与您互动以及如何感知您的性格。建议包含性格、背景故事、外貌细节等。

2. **📖 故事大总结**
    - **功能说明**：这是一个“长期记忆管理”工具。当游戏进行多轮后，您可以生成一份总结来概括当前的主要剧情、已知的关键信息和当前局势。
    - **智能生成**：设置回顾轮数（推荐 20-50 轮）并点击“开始总结”，AI 会自动梳理历史对话并为您撰写总结。
    - **长期记忆注入**：保存后的总结内容会作为“长期记忆”的一部分注入每一轮对话中，极大地减少 AI 出现“幻觉”或忘记核心剧情的情况。

> **建议**：当剧情发生重大转折，或感觉 AI 开始忘记之前的关键线索时，记得去更新一下您的 **故事大总结**。
`
  },
  {
    id: 'interface',
    title: '界面与交互',
    content: `
# 界面与交互指南

### 顶部栏
- **[⚙️ 设置](action:openSettings)**：调整音量、LLM 配置、绘图设置等。
- **[💾 存档](action:openSaveManager)**：管理您的游戏进度。
- **[❓ 帮助](action:stay)**：就是您现在看到的这个界面！

### 侧边栏
- **状态卡片**：显示您的 HP、MP、金钱、位置等信息。
- **[📜 任务列表](action:highlightQuests)**：
    - 显示当前正在进行的任务。
    - 点击任务条目可以查看任务目标、奖励以及当前进度。
    - **提示**：任务通常由 NPC 发布，完成任务是获取金钱和提升好感度的重要途径。
- **[🤝 约定栏](action:highlightPromises)**：
    - 记录您与 NPC 之间达成的口头协议或日常小约定（如“晚点一起喝茶”、“明天去雾之湖”）。
    - 约定通常由对话产生，虽然不像任务那样有丰厚的奖励，但它是维系人物关系、积累好感度的核心。
    - **提示**：言出必行是幻想乡的生存之道，爽约可能会导致好感度大幅下降。
- **[👥 角色列表](action:highlightCharacters)**：
    - 显示当前场景中出现的角色。
    - **点击角色头像**：查看该角色的详细属性（包括好感度、服从度、当前行为与心理活动）。
    - 这是一个非常强大的功能，能帮您“读心”，了解 NPC 此刻的真实想法。

### 核心编辑器 (高级功能)
- **[📖 条目编辑器](action:openCharEditor)**：
    - **功能**：在这里您可以手动编辑游戏中的“世界设定”（Lorebook）。
    - **用途（未实装）**：如果您觉得 AI 对某个角色的认知有误，或者想要增加新的地理、物品设定，可以在此添加条目。这些信息会作为 AI 的“常识”在对话中生效。
- **[🧩 提示词中心](action:openPromptBuilder)**：
    - **功能**：查看系统是如何将您的输入、环境信息、记忆等“拼接”成一段发给 AI 的指令的。
    - **用途**：这是为进阶玩家准备的“黑盒查看器”。如果您好奇 AI 为什么会给出某种回复，可以在这里看到它接收到的原始背景信息。

### 底部输入区
- **输入框**：输入您的行动或对话。
- **发送按钮**：提交您的行动。
- **[🔄 刷新按钮](action:highlightRefresh)**：
    - **功能**：重新开始本轮对话。
    - **场景**：如果您对 AI 的回复不满意，或者因为网络原因生成失败，点击此按钮可以回滚状态并重新生成。
    - **注意**：这会删除当前的最后一条回复，请谨慎使用。

### 快捷回复
- 在输入框上方会出现一些白色的气泡，这是系统根据当前情境推荐的回复。点击即可直接发送，非常方便！
`
  },
  {
    id: 'map-system',
    title: '幻想乡地图',
    content: `
# 幻想乡地图系统

幻想乡是一个充满神秘与未知的地域。通过地图系统，您可以直观地了解当前的地理位置，并探索周围的区域。

### 如何进入
- 点击右侧侧边栏顶部的 **[🗺️ 幻想乡地图]** 区域。
- 或者直接点击这里：**[🗺️ 幻想乡地图](action:openMap)**。

### 核心功能
1. **🗺️ 全景展示**：
    - 地图展示了幻想乡的主要地标（如博丽神社、红魔馆、人间之里等）。
    - **交互操作**：使用鼠标滚轮进行缩放，按住左键可以随意拖拽平移。使用右下角的按钮可以快速重置视角。

2. **📍 地点详情**：
    - 点击地图上的发光圆点（灵珠），可以打开该地点的详细卡片。
    - **主要区域**：查看该地点下辖的子区域及详细描述。
    - **常驻/乱入角色**：了解该地点的常客以及当前可能出现在此处的角色。

3. **💬 AI 导游 (Map Chat)**：
    - 这是一个极具特色的功能。在地图界面点击 **[💬 询问]** 按钮，您可以直接向“叙述者”提问。
    - **示例**：
        - “博丽神社现在有什么热闹的事吗？”
        - “红魔馆的地下室怎么走？”
        - “带我去雾之湖逛逛。”
    - **动态指引**：AI 会根据当前的剧情背景为您提供地理指引和背景介绍。

### 导航提示
- **地点名称**：将鼠标悬停在圆点上可以快速预览地点名称。
- **返回操作**：在查看子区域详情时，点击顶部的“返回”按钮可回到主地点信息页。
`
  },
  {
    id: 'save-management',
    title: '存档导出与导入',
    content: `
# 存档导出与导入指南

为了保护您的冒险进度，或在不同设备间同步游戏，我们提供了完整的存档管理功能。

### 如何进入？
点击顶部栏的 **[💾 存档管理](action:openSaveManager)** 按钮即可打开管理界面。

### 导出存档 (备份)
如果您想备份当前进度，或者将其分享给他人：
1. 在存档列表中找到您想要导出的存档。
2. 点击存档条目右侧的 **[📥 导出]** 图标（下载箭头形状）。
3. 浏览器会自动下载一个以 \`.json\` 结尾的文件（例如 \`TouhouSave_我的冒险_20231223.json\`）。
- **包含内容**：该文件包含了该存档下的所有角色属性、对话历史、记忆库数据以及系统快照。

### 导入存档 (恢复)
如果您想加载之前备份的存档，或者导入他人的分享：
1. 在存档管理界面顶部，点击 **[ 导入存档]** 按钮。
2. 在弹出的文件选择框中，选择您之前导出的 \`.json\` 存档文件。
3. 导入成功后，列表中会出现一个带有 **“(导入)”** 后缀的新存档。
4. 点击该存档旁的 **[▶️ 读取]** 按钮即可开始游戏。

### 注意事项
- **安全性**：导入存档是一个“增量”操作，它会创建一个新的存档位，**不会覆盖**您现有的任何存档，请放心使用。
- **版本兼容**：建议使用相同版本的游戏进行导入导出。如果游戏版本差异过大，可能会出现数据结构不兼容的情况。
- **文件修改**：请不要手动编辑导出的 \`.json\` 文件，除非您非常了解游戏的底层数据结构，否则极易导致存档损坏无法读取。

> **小贴士**：养成定期导出存档的习惯，是防止浏览器缓存清理导致进度丢失的最佳手段！
`
  },
  {
    id: 'combat',
    title: '战斗系统',
    content: `
# 战斗系统详解

当剧情中发生不可调解的冲突时，将进入 **“符卡规则 (Spell Card System)”** 下的战斗模式。

### 战斗界面布局
战斗开启后，界面右侧会出现一个扇形的 **战斗指令轮盘**。
- **ATTACK (攻击)**：基础的弹幕射击，造成物理或魔法伤害。
- **SPELL (符卡)**：打开符卡列表，释放角色的专属大招。
- **ITEM (物品)**：使用背包中的药水、食物或其他战斗道具。
- **TALK (嘴遁)**：核心系统！通过言语动摇对方。
- **ESCAPE (逃跑)**：尝试撤离战斗（未实装）。

### 核心机制
1. **P 点系统 (P-Point)**：
    - 屏幕底部会显示您的 **P 点槽 (0-100)**。
    - 通过攻击或受到伤害可以积攒 P 点。
    - 当 P 点达到 **80 以上** 时，角色将进入 **“爆发状态 (Burst)”**，伤害大幅提升，且伴有华丽的视觉特效。

2. **LLM 嘴遁 (Persuasion)**：
    - 这不是单纯的数值比拼。点击 **TALK** 后，您可以直接输入一段文字来尝试劝说敌人。
    - **逻辑判定**：由 LLM #4 实时分析您的文字。如果您能切中对方的性格弱点、引用之前的剧情线索、或提出合理的利益交换，可能会直接造成“精神暴击”，大幅降低敌人的属性。

3. **友军支援 (Ally Support)**：
    - 如果您的队伍中有其他角色，她们会作为友军自动参与战斗。
    - 友军拥有独立的 AI 逻辑，会根据战况自动选择攻击、防御或为您提供治疗支援。

4. **护盾与闪避**：
    - 除了 HP，某些符卡会提供 **护盾 (Shield)**。护盾会优先抵扣伤害。
    - **闪避率 (Dodge)** 受熟练度和 Buff 影响，高闪避可以让您在弹幕雨中毫发无伤。

### 战斗建议
- **先观察后行动**：点击敌方头像可以查看其当前的状态、抗性以及可能的心理活动。
- **文武齐下**：在攻击的同时配合 **TALK**，往往能起到事半功倍的效果。
- **注意 MP 消耗**：强大的符卡需要消耗大量灵力，请务必预留补给。
`
  },
  {
    id: 'talent-tree',
    title: '技能天赋树',
    content: `
# 技能天赋树指南

技能天赋树是提升角色战斗能力与生存能力的核心系统。通过在战斗中积累熟练度并提升等级，您可以获得天赋点来解锁强大的被动技能。

### 交互操作
- **快速进入**：直接点击这里：**[🌳 技能天赋树](action:openTalentTree)**。
- **自然拖拽**：在天赋树区域按住鼠标左键并移动，可以自由查看整棵天赋树。拖拽比例为 1:1，提供最流畅的操作体验。
- **滚轮缩放**：使用鼠标滚轮可以实时缩放天赋树的大小（范围：40% - 200%），方便您在宏观视角与微观细节间切换。
- **点击查看**：点击任意天赋节点，右侧侧边栏将显示该天赋的详细描述、消耗点数及前置需求。
- **双重板块**：
    - **武炼极意 (Combat)**：专注于提升攻击力、防御力、闪避率以及各种特殊的战斗触发效果。
    - **森罗万象 (Knowledge)**：侧重于提升非战斗能力、剧情交互加成等（目前尚未开放）。

### 核心机制
1. **天赋点 (Skill Points)**：
    - 每次战斗胜利后获得的经验值（EXP）满 1000 会提升熟练等级，并奖励 1 点天赋点。
    - 某些稀有道具或剧情事件也可能奖励额外点数。
2. **前置需求**：
    - 大部分高级天赋需要先解锁一个或多个前置天赋。在右侧详情页中可以查看具体的连接路径。
3. **解锁方式**：
    - 满足前置条件且拥有足够点数时，点击右侧侧边栏的 **“学习天赋”** 按钮即可永久激活该效果。

### 战斗天赋一览 (部分)
- **力量训练**：直接提升基础伤害。
- **连击架势**：普通攻击有概率触发连续两次打击。
- **幻想杀手**：对高战斗力敌人造成额外重创。
- **冥想**：战斗初期提供持续的灵力恢复，适合长时间消耗战。
`
  },
  {
    id: 'combat_level',
    title: '战斗熟练度',
    content: `
# 战斗熟练度系统

提升您的 **“战斗熟练等级 (Combat Level)”** 是在异界生存的基础。

### 什么是战斗熟练度？
您可以将其理解为主角的“综合战斗等级”。它代表了您在幻想乡历练的整体成果。
- **获取经验**：
    - **赢得战斗**：根据战斗烈度，获得 **+200 至 +800** 经验。
    - **战斗失败/逃跑**：依然能获得少量经验 (**+50 至 +100**)，毕竟失败也是经验的一部分。
    - **特殊事件**：某些剧情互动或食用特殊食物也可能直接增加经验。
- **等级上限**：目前最高等级为 **Lv.100**，每级需要 **1000** 点经验。

### 战斗力 (Power) vs 战斗熟练度 (Level)
这是两个经常被混淆的概念，请务必区分：
- **战斗力评级 (Power Level)**：
    - **定义**：指不在符卡规则下时，人物本身所拥有的硬实力上限。
    - **分级**：从 **F-** (普通人类) 到 **S+** (顶尖战力)，乃至 **EX** (神话级) 或 **∞** (无法估量)。
    - **特征**：每一级之间的实力差距巨大。它是种族天赋、权柄掌握或千百年修行的体现。
- **战斗熟练度 (Combat Level)**：
    - **定义**：代表您在当前规则下对战斗技巧的掌握程度（即您的“等级”）。
    - **特征**：通过不断的战斗积累经验提升。它代表了您的成长性。
- **二者关系**：随着 **战斗熟练度** 的提升，您的综合 **战斗力评级** 也会随之晋升。

### 等级提升的好处
1. **基础属性提升**：等级提升会小幅增加您的基础伤害加成。
2. **生存能力**：提升熟练度会增加您的基础 **闪避率 (Dodge Rate)**。
3. **MP 消耗额外减免**：当战斗熟练度达到 **51 级** 后，将解锁额外的 MP 消耗减免。
    - **51-100 级**：每升一级增加 **0.5%** 减免。
    - **100 级 (MAX)**：获得最高 **25%** 的额外独立减免。
    - *注：此减免是在符卡自身等级减免后的基础上，进行二次乘法计算。*
4. **评级晋升**：当熟练度达到一定阶段，您的战斗力评级（如 D+ -> C）会获得提升。

### 如何查看？
在左侧的状态卡片中，您可以实时看到当前的 **战斗熟练度** 等级与经验进度条。
`
  },
  {
    id: 'spell_proficiency',
    title: '符卡熟练度',
    content: `
# 符卡熟练度系统

除了综合等级，每一张符卡（技能）都拥有独立的 **“符卡熟练等级 (Spell Level)”**。

### 什么是符卡熟练度？
它代表了您对某一特定符卡的掌握精通程度。
- **获取经验**：
    - **使用符卡**：在战斗中每释放一次该符卡，该符卡会获得 **5-10** 点经验。
    - **战斗胜利**：战斗胜利时，您拥有的**所有符卡**都会获得 **50** 点经验。
- **等级上限**：每张符卡最高为 **30 级**，每级需要 **100** 点经验。

### 等级提升的好处
1. **MP 消耗减免**：等级越高，释放该符卡所需的灵力就越少。
    - **Lv.1**：0% 减免
    - **Lv.30**：**29%** 消耗减免
2. **额外特效**：当符卡达到 **30 级 (MAX)** 时，释放时将会触发更华丽的额外视觉特效。

### 如何查看？
点击状态卡片中的 **[✨ 符卡技能]** 按钮，或者直接点击这里：**[✨ 符卡名录](action:openSpells)**。在打开的名录中点击具体符卡，即可查看其等级、经验条及详细数值。
`
  },
  {
    id: 'bonds',
    title: '人物羁绊',
    content: `
# 人物羁绊系统

在幻想乡，与角色建立深层联系是游戏的核心。每个 NPC 都有三个核心社交数值：

### 核心数值
1. **❤️ 好感度 (Favorability)**
    - **定义**：角色对您的喜爱与信任程度。
    - **作用**：高好感度可以解锁更多亲密对话、触发专属任务，甚至在战斗中获得对方的自动支援。
    - **提升**：通过赠送礼物、顺从对方性格的交谈、完成对方委托的任务来提升。

2. **🔗 服从度 (Obedience)**
    - **定义**：角色对您的顺从、敬畏或依赖程度。
    - **作用**：高服从度能让角色更容易听从您的命令，在某些特殊决策中倾向于您的选择。
    - **提升**：通过展示强大的力量（战斗获胜）、展现威严、或者在某些博弈中占据主导地位来提升。

3. **� 声望 (Reputation)**
    - **定义**：您在整个幻想乡或特定区域的名声。
    - **作用**：高声望会让初次见面的 NPC 对您更客气，更容易接到高难度的传奇任务。
    - **提升**：通过完成公开任务、在大型事件中露面、或者做一些广为人知的好事（或坏事）来改变。

### 提升小技巧
- **投其所好**：每个角色的性格不同，同样的举动在不同人眼中增加的数值也不同。比如，对灵梦来说，捐赠香火钱可能比长篇大论更管用。
- **对话内容**：AI 会理解您说话的语气 and 意图。真诚的问候与虚伪的应付会产生完全不同的社交后果。
- **长期积累**：羁绊不是一天建成的，通过持续的互动，您甚至可以改变一个角色对您的基本看法。

> **提示**：点击侧边栏 **[👥 角色列表](action:highlightCharacters)** 中的头像，可以随时查看该角色对您的具体数值。
`
  },
  {
    id: 'items',
    title: '物品与背包',
    content: `
# 物品与背包系统

在异界生存，收集资源与管理背包是必不可少的。

### 快速进入
点击左侧主角状态卡片中的 **[📦 物品栏]** 按钮，或者直接点击这里：**[📦 物品背包](action:openItems)**。

### 物品分类
游戏中的物品分为三大类：

1. **🌿 素材与消耗品 (Material)**
    - **内容**：包括食材、草药、药水、制造材料等。
    - **用途**：药水可以在战斗中使用（通过 **ITEM** 指令）恢复 HP/MP；食材可用于烹饪 or 完成任务。
2. **⚔️ 装备 (Equipment)**
    - **内容**：武器、防具、饰品等。
    - **用途**：穿戴装备可以永久提升您的基础属性（攻击、防御、闪避等）。
3. **✨ 特殊物品 (Special)**
    - **内容**：任务道具、剧情关键物品、稀有收藏品。
    - **用途**：通常用于推进特定剧情 or 作为与 NPC 互动的特殊礼物。

### 如何获取物品？
- **剧情交互**：通过对话，NPC 可能会赠送您物品。
- **战斗奖励**：赢得战斗后有概率获得战利品。
- **任务奖励**：完成 NPC 布置的任务是获取高级装备的主要途径。
- **采集与购买**：在特定地点进行探索，或前往商店购买。

### 背包管理
- 点击左侧主角状态卡片中的 **[📦 物品栏]** 按钮可以查看当前拥有的所有物品。
- **物品详情**：点击物品图标可以查看其具体数值加成和背景故事。
- **使用物品**：非战斗状态下，某些消耗品可以直接点击使用；战斗中需通过战斗轮盘的 **ITEM** 菜单使用。

> **提示**：背包空间是有限的（虽然目前暂未实装硬性上限），记得定期整理您的战利品！
`
  },
  {
    id: 'memory',
    title: '记忆库',
    content: `
# 记忆库系统

记忆库是 AI 的“大脑”，记录了您与它发生过的所有重要事情。

### 如何打开？
点击侧边栏（或移动端菜单）中的 **[🧠 记忆面板](action:openMemoryPanel)** 按钮。

### 记忆类型
为了让 AI 的记忆更有条理，系统会将信息分类存储：

1. **📜 剧情摘要 (Summary)**
    - **内容**：对每一轮对话的自然语言总结。
    - **作用**：记录“谁做了什么”、“发生了什么大事”。这是 AI 回忆剧情最主要的方式。

2. **🏗️ 设施档案 (Facility)**
    - **内容**：记录您拥有或管理的设施（如您的酒馆、房屋、工坊）的变动。
    - **作用**：当您处于相关区域时，AI 会优先想起该设施的状态（比如酒馆是否翻新过）。

3. **🤝 重要联盟 (Alliance)**
    - **内容**：记录您与其他角色达成的长期合作、契约或深度羁绊。
    - **作用**：让 AI 始终记住谁是您的“铁杆盟友”。

4. **🕵️ 绝密情报 (Intelligence)**
    - **内容**：记录您在幻想乡中探索到的世界真相、角色秘密或隐藏线索。
    - **作用**：这些信息非常关键，AI 在涉及相关话题时会表现得更加“知情”。

5. **🔢 状态快照 (Variable)**
    - **内容**：数值层面的变动记录（如金钱的大幅增减、获得稀有物品）。
    - **作用**：作为“硬事实”补充，防止 AI 在数值逻辑上出现混乱。

### 记忆注入模式
为了让 AI 更好地回忆起过去，我们提供了两种检索模式：

- **粗筛模式 (Basic)**：
    - **速度**：快。
    - **原理**：基于关键词匹配。
    - **适用**：一般的日常对话回顾。

- **精筛模式 (Advanced)**：
    - **速度**：一般（额外消耗一些 Token）。
    - **原理**：AI 会深度阅读相关记忆并进行语义理解（例如它能理解“那个红色的巫女”指的就是“灵梦”）。
    - **适用**：当您觉得 AI “忘了”某件很重要的事情时，开启此模式可以强行唤醒它的深层记忆。

> **注意**：您可以在 **[⚙️ 设置](action:openSettings)** -> **LLM配置** -> **记忆相关** 中调整这些选项。
`
  },
  {
    id: 'drawing',
    title: '绘图系统',
    content: `
# AI 绘图系统详解

想要在对话中实时看到精美的剧情插画吗？本游戏支持通过 AI 绘图接口，根据当前的剧情自动生成视觉画面。

### 功能介绍
开启绘图功能后，系统在每一轮对话结束时，会根据对话的内容、环境描写以及角色的心理活动，自动构思并绘制一幅符合意境的插画。
- **动态生成**：插画内容完全基于当前对话，每一张都是独一无二的。
- **版本适配**：系统已针对 NovelAI V3 (Tags) 和 V4/V4.5 (Natural Language) 进行了深度优化，自动匹配最佳提示词系统。

### 如何配置？
绘图系统的配置分为两个步骤，均在 **[⚙️ 设置](action:openSettings)** -> **AI 插画** 选项卡中完成：

**第一步：配置提示词生成模型 (LLM #5)**
- **职责**：负责阅读剧情，并将其转化为适合 AI 绘图的详细提示词。
- **提示词系统**：
    - **Nanobanana**: 使用中文自然语言描述。
    - **NovelAI V4/V4.5**: 使用英文自然语言描述，专为 V4 理解力优化。
    - **NovelAI V3**: 使用英文 Tags (标签) 格式。
- **建议**：使用指令遵循能力强的模型（如 Gemini-3-flash）。

**第二步：配置绘图 API (Image API)**
- **API 类型**：
    - **Nanobanana**: 兼容标准的 OpenAI 绘图接口格式。
    - **NovelAI 官方格式**: 直接连接 NovelAI 官方服务。
- **Base URL**: 
    - Nanobanana 需填入对应的 Base URL。
    - NovelAI 默认使用官方地址 \`https://image.novelai.net/ai/generate-image\`。
- **模型名称 (Model)**: 
    - NovelAI 支持内置的 \`nai-diffusion-4-full\` 等模型，也支持手动输入自定义模型 ID。

### 注意事项
1. **Token 消耗**: 开启此功能会增加 API 调用频率并消耗额外的 Token (LLM #5) 以及绘图点数 (如 Anlas)。
2. **生成质量**: 质量很大程度上取决于您所使用的 API 供应商和模型版本。推荐使用 NovelAI V4 以获得更强的自然语言理解能力。
3. **网络环境**: 由于图片数据较大，请确保您的网络环境稳定。

### 常见问题排查 (Troubleshooting)

**Q: 提示 CORS 跨域错误或请求失败怎么办？**
- **原因**：NovelAI 官方接口 (\`image.novelai.net\`) 不允许浏览器直接调用。
- **解决方法**：
    1. **使用代理**：在“API Base URL”中填入一个支持 NovelAI 的反向代理地址。
    2. **CORS 转发**：您可以使用类似于 \`https://cors-anywhere.azm.workers.dev/https://image.novelai.net/ai/generate-image\` 的格式（注意：请确保代理可信）。
    3. **浏览器插件**：安装“Allow CORS”等浏览器插件（仅推荐本地调试使用）。

> **提示**：如果您暂时没有绘图 API，请关闭该功能（默认关闭）。
`
  },
  {
    id: 'management',
    title: '营业系统 (暂时关闭)',
    content: `
# 居酒屋营业系统详解

> **⚠️ 功能状态说明**：
> 目前 **“营业系统”已暂时关闭维护**。在当前版本中，您无法通过点击图标开启该模式。
> **游戏体验不受影响**：所有的经营环节将自动切换为 **“纯文字叙事模式”**。AI 会通过精彩的文字描写来呈现居酒屋的经营过程、客人互动及突发事件，带给您如同阅读轻小说般的经营体验。

~~除了日常的剧情互动，您还可以开启 **“营业模式”**，亲身体验经营居酒屋的乐趣。~~

### 如何开启？
~~在对话输入框的左侧，有一个 **[🏪 营业系统]** 图标。~~
- ~~**开启状态**：系统会根据当前剧情（如：有客人到访）自动触发经营小游戏。~~
- ~~**关闭状态**：系统将以纯文字叙事的方式描述经营过程，不会进入像素小游戏界面。~~

### 核心玩法
1. ~~**动态地图生成**：~~
    - ~~每一场营业的地图都是由 AI 根据当前位置（如：博丽神社、迷途竹林）随机生成的。~~
2. ~~**像素互动**：~~
    - ~~使用 **WASD** 或 **方向键** 移动。~~
    - ~~靠近桌子、炉灶 or 客人时，会出现交互提示。~~
3. ~~**服务流程**：~~
    - ~~**入座**：引导客人到空位。~~
    - ~~**点单**：听取客人的需求。~~
    - ~~**烹饪**：在炉灶旁制作料理。~~
    - ~~**上菜**：将做好的料理送达。~~
    - ~~**收银**：结算金钱，增加好感度。~~

### 注意事项
- ~~**操作建议**：如果您希望获得最流畅的剧情体验，**建议暂时保持关闭状态**。~~
- ~~**手动触发**：如果您想尝试体验，可以在开启开关后，在对话中引导剧情进入“开店营业”环节。~~
`
  },
  {
    id: 'music-player',
    title: '音乐播放器',
    content: `
# 音乐播放器指南

为了给您的幻想乡之旅营造更好的氛围，我们内置了一个功能强大的音乐播放器。

### 核心功能
- **随处拖动**：点击播放器左侧 of **[⠿ 拖拽柄]**，可以将其放置在屏幕的任何位置。
- **展开/折叠**：
    - 点击 **[唱片图标]** 或 **[展开按钮]** 即可切换到完整面板。
    - 在展开状态下，点击顶部的 **[向下箭头]** 即可收回至迷你模式。
- **三种播放模式**：在播放列表界面，点击模式图标可切换 **[列表循环]**、**[随机播放]** 或 **[单曲循环]**。

### 如何添加音乐？
点击播放器展开面板中的 **[📜 列表/设置]** 按钮，您可以：

1. **扫描本地音乐**：
    - 系统会自动扫描项目内置的 BGM 资源。
    - **位置**：如果您是开发者，可以将音频文件放入 \`src/assets/music\` 文件夹中，系统会自动识别。

2. **添加网易云音乐**：
    - 选择 **“网易云ID”** 选项卡。
    - 输入歌曲的数字 ID（例如从网页版链接 \`id=123456\` 中获取）。
    - 点击 **[+]** 即可将其加入播放列表。

3. **添加自定义链接**：
    - 选择 **“自定义链接”** 选项卡。
    - 输入直接指向音频文件（MP3/OGG）的公开 URL。
    - 点击 **[+]** 完成添加。

### 隐私与持久化
- **自动保存**：您的播放列表、当前播放进度、音量以及播放模式都会自动保存。
- **本地存储**：所有数据均保存在您浏览器的 \`localStorage\` 中，**不会发送到服务器**，确保您的隐私安全。
- **刷新恢复**：即使刷新页面或重新打开浏览器，您的个性化歌单也会依然存在。

> **小贴士**：通过合理利用“网易云 ID”功能，您可以轻松将自己喜欢的东方同人曲目集成到游戏中！
`
  }
];
